# Динамические категории

## Что это?

Система категоризации теперь поддерживает **динамическое создание новых категорий**. Бот не ограничен только категориями из GoldenSet.

## Как это работает?

### 1. **Приоритет категориям из GoldenSet**
Сначала бот пытается использовать существующие категории:
- Expense: Grocery, Restaurant, Transport, Health, etc.
- Income: Salary, Freelance, Bonus, etc.

### 2. **Поиск похожей категории**
Если GPT предлагает категорию не из списка, система пытается найти похожую:
- "Gym" → "Health"
- "Grocery Store" → "Grocery"
- "Fast Food" → "Restaurant"

### 3. **Создание новой категории**
Если ничего не подошло, **создаётся новая категория автоматически**:
- Новые категории сохраняются в файл `categories.json`
- При следующем запуске они автоматически загружаются
- Категории доступны для всех будущих транзакций

## Примеры

### Создание новой категории
```
User: "1000 Pets"
→ GPT: "Pets" (новая категория)
→ Система: ✅ Создаёт категорию "Pets" и сохраняет её
→ В следующий раз: "50 собачий корм" → автоматически использует "Pets"
```

### Использование существующей категории
```
User: "200 массаж"
→ GPT: "Health" 
→ Система: ✅ Использует существующую категорию
```

### Поиск похожей категории
```
User: "500 Gym membership"
→ GPT: "Fitness" (не в списке)
→ Система: Находит похожую "Health"
→ Результат: ✅ Категория "Health"
```

## Технические детали

- **Файл**: `categories.json` — хранит все динамически созданные категории
- **Формат**:
  ```json
  {
    "Expense": ["Grocery", "Restaurant", ..., "Pets", "Gym"],
    "Income": ["Salary", ...]
  }
  ```
- **Персистентность**: Категории сохраняются между запусками бота
- **Безопасность**: Система проверяет на дубликаты и похожие категории

## Преимущества

✅ **Гибкость** — можно добавлять любые категории  
✅ **Автоматизация** — не нужно вручную настраивать  
✅ **Постоянство** — категории сохраняются между сессиями  
✅ **Умная классификация** — система пытается найти похожие категории  

## Управление категориями

Чтобы посмотреть все категории (включая динамические):
```bash
cat categories.json
```

Чтобы удалить динамические категории:
```bash
rm categories.json
```
(система восстановит только базовые категории из GoldenSet)
